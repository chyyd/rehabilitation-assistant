# 手动测试计划

## 测试环境准备

### 前置条件
- [x] Python 3.13+ 已安装
- [x] Node.js 22+ 已安装
- [ ] 所有依赖已安装

### 启动服务

#### 1. 启动Python后端服务
```bash
cd C:\Users\youda\Desktop\new
python main.py
```

**预期结果:**
- ✓ 控制台显示 "启动FastAPI后端服务..."
- ✓ 显示 "数据库初始化完成"
- ✓ 显示 "AI服务初始化完成"
- ✓ 显示 "Uvicorn running on http://127.0.0.1:8000"

**验证:**
- [ ] 访问 http://127.0.0.1:8000/ 返回 {"message": "康复科助手API", ...}
- [ ] 访问 http://127.0.0.1:8000/docs 显示Swagger API文档
- [ ] 访问 http://127.0.0.1:8000/health 返回 {"status": "healthy"}

#### 2. 启动Electron前端
```bash
cd electron-app
npm install  # 首次运行需要
npm run dev
```

**预期结果:**
- ✓ Vite开发服务器启动在 http://localhost:5173
- ✓ Electron窗口自动打开
- ✓ 窗口标题显示 "康复科助手"

---

## 功能测试

### 测试1: 患者管理

#### 1.1 创建新患者
**步骤:**
1. 点击右上角 "新患者" 按钮
2. 步骤1：输入住院号（如：202401001）
3. 步骤2：粘贴首次病程记录（测试文本）
4. 步骤3：确认AI提取的信息
5. 点击 "完成并保存"

**预期结果:**
- [ ] 对话框正常打开
- [ ] 步骤指示器显示正确进度
- [ ] AI成功提取患者信息
- [ ] 保存成功，患者出现在左侧列表
- [ ] 新患者卡片显示正确的住院天数

**测试数据:**
```
住院号: 202401001
首次病程记录:
患者张三，男，65岁，因"右侧肢体活动不利10天"于2024-01-15入院。
诊断：脑梗死恢复期。
既往史：高血压病10年。
专科检查：神志清，精神可，语言流畅，右侧上肢肌力3级，下肢肌力4级。
```

#### 1.2 患者列表显示
**验证:**
- [ ] 左栏显示 "今日待办" 标题
- [ ] 患者卡片显示姓名、住院号、住院天数、诊断
- [ ] 优先级图标正确显示（🚨紧急、🟡高、🟢普通）
- [ ] 卡片背景色根据优先级变化
- [ ] 鼠标悬停有动画效果

#### 1.3 患者选择
**步骤:**
1. 点击左侧患者列表中的某个患者

**预期结果:**
- [ ] 中栏工作区显示患者信息
- [ ] 患者信息卡片完整显示
- [ ] 今日任务卡片显示该患者的提醒
- [ ] 病程记录生成卡片可用

---

### 测试2: 患者信息显示

**验证:**
- [ ] 住院号正确显示
- [ ] 姓名正确显示
- [ ] 性别、年龄正确显示
- [ ] 入院日期格式化为 YYYY-MM-DD
- [ ] 住院天数动态计算
- [ ] 诊断和主诉正确显示

---

### 测试3: 病程记录生成

#### 3.1 AI生成病程记录
**步骤:**
1. 选择一个患者
2. 在 "当日情况" 文本框输入: "患者神志清，精神可，右上肢肌力较前改善，继续康复训练"
3. 点击 "AI生成" 按钮

**预期结果:**
- [ ] 按钮显示loading状态
- [ ] AI生成的病程记录显示在预览框
- [ ] 生成内容包含日期和记录类型
- [ ] 生成内容包含患者情况描述
- [ ] 生成成功后显示成功消息

#### 3.2 保存病程记录
**步骤:**
1. 确认AI生成的病程记录
2. 点击 "保存" 按钮

**预期结果:**
- [ ] 显示 "保存成功" 消息
- [ ] 输入框清空
- [ ] 可在 "查看历史" 中看到新保存的记录

#### 3.3 导出病程记录
**步骤:**
1. 生成或输入病程记录
2. 点击 "导出txt" 按钮

**预期结果:**
- [ ] 文件自动下载
- [ ] 文件名格式: 病程记录_住院号_日期.txt
- [ ] 文件内容正确

---

### 测试4: 提醒系统

**验证:**
- [ ] 今日任务卡片显示提醒
- [ ] 紧急提醒显示红色标识和🚨图标
- [ ] 重要提醒显示黄色标识和🟡图标
- [ ] 常规提醒显示绿色标识和🟢图标
- [ ] 无任务时显示 "今日暂无任务"

**测试不同住院天数的患者:**
- [ ] 住院85+天：显示 "住院第N天，注意90天限制"
- [ ] 住院≤3天：显示 "需查看化验检查结果"
- [ ] 常规患者：显示常规查房提醒

---

### 测试5: 快速工具

**验证:**
- [ ] 右栏显示 "快速模板" 标题
- [ ] 模板类别下拉框可选
- [ ] 常用短语列表显示
- [ ] 点击短语复制到剪贴板
- [ ] 显示 "已复制到剪贴板" 消息

---

### 测试6: 界面响应

**验证:**
- [ ] 窗口可调整大小
- [ ] 三栏布局适应窗口变化
- [ ] 滚动条正常工作
- [ ] 所有按钮有hover效果
- [ ] 加载状态正确显示

---

## 错误处理测试

### 测试7: 后端服务未启动

**步骤:**
1. 确保Python后端未运行
2. 启动Electron前端
3. 尝试获取患者列表

**预期结果:**
- [ ] 显示友好的错误消息
- [ ] 应用不崩溃
- [ ] 提示用户启动后端服务

### 测试8: 无效输入

**步骤:**
1. 新建患者时输入空住院号
2. 生成病程记录时输入空当日情况

**预期结果:**
- [ ] 显示验证错误消息
- [ ] 不能进入下一步
- [ ] 错误消息清晰明确

---

## 性能测试

### 测试9: 大量患者数据

**步骤:**
1. 创建20+个患者
2. 查看患者列表滚动性能

**预期结果:**
- [ ] 滚动流畅
- [ ] 无明显卡顿
- [ ] 筛选和排序响应快速

---

## 兼容性测试

### 测试10: Windows环境

**验证:**
- [ ] 在Windows 10/11上正常运行
- [ ] 窗口样式符合Windows规范
- [ ] 文件路径处理正确
- [ ] 中文显示正常

---

## 测试结果记录

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 启动Python后端 | ⬜ 未测试 | |
| 启动Electron前端 | ⬜ 未测试 | |
| 创建新患者 | ⬜ 未测试 | |
| 患者列表显示 | ⬜ 未测试 | |
| 患者信息显示 | ⬜ 未测试 | |
| AI生成病程记录 | ⬜ 未测试 | |
| 保存病程记录 | ⬜ 未测试 | |
| 导出病程记录 | ⬜ 未测试 | |
| 提醒系统 | ⬜ 未测试 | |
| 快速工具 | ⬜ 未测试 | |
| 错误处理 | ⬜ 未测试 | |
| 性能测试 | ⬜ 未测试 | |

---

## 已知问题

记录测试过程中发现的任何问题：

1. 问题描述：
   - 复现步骤：
   - 预期结果：
   - 实际结果：
   - 优先级：

---

## 测试签名

测试人员: _______________
测试日期: _______________
版本: v1.0.0-electron
